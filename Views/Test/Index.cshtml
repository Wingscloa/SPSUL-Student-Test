@using SPSUL.Controllers
@{
    ViewData["Title"] = "Testy";
    Layout = "~/Views/Shared/Layouts/_Main.cshtml";
}
<link rel="stylesheet" href="~/css/chartpage.css" />

<div class="container-fluid py-3">
    <div class="row g-3">
        <div class="col-lg-9 order-2 order-lg-1">
            <div class="card shadow-sm cardTable">
                <div class="card-header brandText d-flex justify-content-between">
                    <span>Seznam testů</span>
                    <a class="iconLink" asp-action="Create" asp-controller="Question">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" class="bi bi-patch-plus" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5" />
                            <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z" />
                        </svg>
                        Vytvořit
                    </a>
                </div>
                <div class="table-responsive tableContent">
                    <table class="table align-middle mb-0">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Název</th>
                                <th>Tvůrce</th>
                                <th>Aktivní</th>
                                <th>Počet přiřazení</th>
                                <th class="text-center"><i class="bi bi-person-fill"></i> Studenti</th>
                                <th>Průměrná úspěšnost</th>
                                <th class="text-center"><i class="bi bi-pencil-square"></i> Edit</th>
                                <th>Pohled na test</th>
                            </tr>
                        </thead>
                        <tbody>
                           @*  @foreach (var r in Model)
                            {
                                <tr>
                                    <td>@r.Id</td>
                                    <td>@r.Nazev</td>
                                    <td>@r.Tvurce</td>
                                    <td><span class="badge bg-@(r.Aktivni ? "success" : "secondary")">@(r.Aktivni ? "Aktivní" : "Neaktivní")</span></td>
                                    <td>@r.PocetPrirazeni</td>
                                    <td class="text-center"><button class="icon-btn" title="Studenti"><i class="bi bi-person-fill"></i></button></td>
                                    <td>@r.PrumerUspech %</td>
                                    <td class="text-center"><button class="icon-btn" title="Edit"><i class="bi bi-pencil-square"></i></button></td>
                                    <td><a href="#" class="btn btn-outline-secondary btn-sm">Otevřít</a></td>
                                </tr>
                            } *@
                        </tbody>
                    </table>
                </div>
                <div class="card-footer d-flex justify-content-between align-items-center">
                    <div>Strana @ViewBag.Page / @ViewBag.TotalPages (@ViewBag.Total položek)</div>
                    <div class="btn-group">
                        <a class="btn btn-outline-secondary @(ViewBag.Page == 1 ? "disabled" : null)" href="@Url.Action("Index", new { q = ViewBag.Query, active = ViewBag.Active, author = ViewBag.Author, page = ViewBag.Page - 1, pageSize = ViewBag.PageSize })">Předchozí</a>
                        <a class="btn btn-outline-secondary @(ViewBag.Page >= ViewBag.TotalPages ? "disabled" : null)" href="@Url.Action("Index", new { q = ViewBag.Query, active = ViewBag.Active, author = ViewBag.Author, page = ViewBag.Page + 1, pageSize = ViewBag.PageSize })">Další</a>
                    </div>
                </div>
            </div>
        </div>

        <aside class="col-lg-3 order-1 order-lg-2">
            <div class="card shadow-sm sticky-top" style="top: 1rem;">
                <div class="card-header brandText fw-bold">Filtrace</div>
                <div class="card-body">
                    <form method="get" class="vstack gap-2">
                        <input class="form-control" name="q" value="@ViewBag.Query" placeholder="Hledat název" />
                        <input class="form-control" name="author" value="@ViewBag.Author" placeholder="Tvůrce" />
                        <select class="form-select" name="active">
                            <option value="">Aktivní/Neaktivní</option>
                            <option value="true" selected>Aktivní</option>
                            <option value="false">Neaktivní</option>
                        </select>
                        <button class="btn brandText">Filtrovat</button>
                    </form>
                </div>
            </div>
        </aside>
    </div>
</div>