(function(){
  const items=[...document.querySelectorAll('.tabbar-item')];
  const setActive=(el)=>{ items.forEach(i=>i.classList.toggle('active', i===el)); };
  items.forEach(i=>{
    i.addEventListener('click',()=> setActive(i));
    i.addEventListener('touchstart',()=> i.classList.add('active'),{passive:true});
    i.addEventListener('touchend',()=> i.classList.remove('active'),{passive:true});
  });

  // set active based on current URL
  const path = location.pathname.toLowerCase();
  const map=[
    {sel:"[asp-controller='Home']", test:()=> path==="/" || path.includes('/home')},
    {sel:"[asp-controller='Test']", test:()=> path.includes('/test')},
    {sel:"[asp-controller='Students']", test:()=> path.includes('/students')},
    {sel:"[asp-controller='Detail']", test:()=> path.includes('/detail')}
  ];
  for(const m of map){
    const el=document.querySelector(`.tabbar ${m.sel}`);
    if(el && m.test()){ el.classList.add('active'); break; }
  }
})();