// Please see documentation at https://learn.microsoft.com/aspnet/core/client-side/bundling-and-minification
// for details on configuring this project to bundle and minify static web assets.

// Global helpers only. Avoid forcing scroll locks on every page.

document.addEventListener('DOMContentLoaded', function () {
    // Detect if there's an actual splash/overlay element on the page
    const hasSplash = document.getElementById('loading-overlay') || document.querySelector('.logo-letter');
    if (!hasSplash) {
        // No splash present; do not touch scrolling
        return;
    }

    // Respect user motion preferences
    const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // Temporarily lock scroll only when splash exists
    const originalOverflow = document.body.style.overflow;
    document.body.style.overflow = 'hidden';

    const unlock = () => {
        // Restore original state instead of forcing 'auto' which may cause overlay scrollbars
        document.body.style.overflow = originalOverflow;
    };

    // Duration aligned with any intro animation; much shorter with reduced motion
    setTimeout(unlock, prefersReduced ? 500 : 2000);

    // Trigger optional logo animation if letters exist
    const letters = document.querySelectorAll('.logo-letter');
    if (letters.length > 0) {
        setTimeout(function () {
            letters.forEach(letter => letter.classList.add('converge-letters'));
        }, 500);
    }
});
